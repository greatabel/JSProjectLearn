<!DOCTYPE html>
<meta charset="utf-8">
<head>
	<!-- add title -->
	<title>World Game Choropleth</title>
    <!-- import required libraries here -->
	<script type="text/javascript" src="../lib/d3.v5.min.js"></script>
	<style>
		/* define CSS rules here */
	
	</style>
</head>


<body>
    <!-- Add heading for the visualization -->
	
	<!-- Create dropdown element here. Options should be added after reading in game file, they should not be created here.-->
	<select id="selectElementId"></select>


	<!-- append visualization svg to this div-->
    <div id="choropleth"></div>

    <script>
	
		// enter code to define margin and dimensions for svg
		
		// enter code to create svg
		
		// enter code to create color scale
		
		// enter code to define tooltip
        
		// enter code to define projection and path required for Choropleth
		const files = ["world_countries.json", "ratings-by-country.csv"];
		const promises = [];
		const popByName = d3.map();
		function row(d) {
		    popByName.set(d.name, +d.population);
		};
		// define any other global variables 
		files.forEach(function(url, index) {
		    promises.push(index ? d3.csv(url) : d3.json(url))
		});

        Promise.all(promises).then(function(data) {
			    console.log(data); //check if all data was loaded

			    //any code that depends on 'data' goes here
			    ready('', data[0], data[1] )
			}
        );
		
		// this function should be called once the data from files have been read
		// world: topojson from world_countries.json
		// gameData: data from ratings-by-country.csv
		
        function ready(error, world, gameData) {
            // enter code to extract all unique games from gameData
            console.log('world', typeof world,world, world[0]);

            console.log('gameData', typeof gameData, gameData[0]);

            // enter code to append the game options to the dropdown
			var min = 1,
		    max = 10,
		    select = document.getElementById('selectElementId');

			for (var i = min; i<=max; i++){
			    var opt = document.createElement('option');
			    opt.value = i;
			    opt.innerHTML = i;
			    select.appendChild(opt);
			}
            // event listener for the dropdown. Update choropleth and legend when selection changes. Call createMapAndLegend() with required arguments.
			
            // create Choropleth with default option. Call createMapAndLegend() with required arguments. 
        }

		// this function should create a Choropleth and legend using the world and gameData arguments for a selectedGame
		// also use this function to update Choropleth and legend when a different game is selected from the dropdown
        function createMapAndLegend(world, gameData, selectedGame){ 
		
			
        }
    </script>

</body>

</html>